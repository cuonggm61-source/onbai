<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thi Th·ª≠: Ph∆∞∆°ng Tr√¨nh M·∫∑t Ph·∫≥ng (30 C√¢u)</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; }
        
        /* M√†n h√¨nh B·∫Øt ƒë·∫ßu */
        #start-screen {
            background: white; padding: 40px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center; margin-top: 50px;
        }
        .start-btn {
            background-color: #27ae60; color: white; border: none; padding: 15px 40px; 
            border-radius: 30px; font-size: 1.2em; font-weight: bold; cursor: pointer; 
            transition: transform 0.2s, background 0.2s; margin-top: 20px;
        }
        .start-btn:hover { background-color: #2ecc71; transform: scale(1.05); }

        /* Thanh ƒëi·ªÅu khi·ªÉn (·∫©n l√∫c ƒë·∫ßu) */
        .sticky-header {
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            position: fixed; top: 0; left: 0; width: 100%; background: #2c3e50; color: white;
            padding: 15px 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            justify-content: center; align-items: center; gap: 20px;
        }
        .timer-box { font-size: 1.5em; font-weight: bold; color: #f1c40f; }
        .submit-btn { background-color: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: bold; }
        .submit-btn:hover { background-color: #c0392b; }

        /* Khung c√¢u h·ªèi (·∫©n l√∫c ƒë·∫ßu) */
        .quiz-container { 
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-top: 60px; 
        }
        
        h1 { text-align: center; color: #2c3e50; margin-bottom: 30px; }
        .question-card { margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .question-title { font-weight: 600; font-size: 1.1em; margin-bottom: 15px; color: #2980b9; }
        .options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        @media (max-width: 600px) { .options { grid-template-columns: 1fr; } }
        
        .option-label { 
            display: block; padding: 10px 15px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: 0.2s; 
        }
        .option-label:hover { background-color: #f8f9fa; }
        input[type="radio"] { margin-right: 10px; }

        /* C√°c class m√†u s·∫Øc (d√πng n·ªôi b·ªô khi ch·∫•m ƒëi·ªÉm nh∆∞ng b·ªã che b·ªüi modal) */
        .correct-answer { background-color: #d4edda !important; border-color: #28a745 !important; color: #155724; }
        .wrong-answer { background-color: #f8d7da !important; border-color: #dc3545 !important; color: #721c24; }
        
        .explanation { 
            display: none; margin-top: 15px; padding: 15px; background-color: #e8f4fd; 
            border-left: 5px solid #3498db; border-radius: 4px; font-size: 0.95em; 
        }

        /* Modal K·∫øt qu·∫£ */
        .result-modal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 30px rgba(0,0,0,0.3);
            text-align: center; z-index: 2000; width: 80%; max-width: 400px;
        }
        /* Overlay ngƒÉn ch·∫∑n thao t√°c b√™n d∆∞·ªõi */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1500; }
        
        .score-display { font-size: 3em; color: #2c3e50; font-weight: bold; display: block; margin: 20px 0; }
        .info-list { text-align: left; margin: 20px auto; max-width: 400px; line-height: 1.8; }
    </style>
</head>
<body>

    <div id="start-screen">
        <h1 style="font-size: 2em;">√în T·∫≠p: Ph∆∞∆°ng Tr√¨nh M·∫∑t Ph·∫≥ng</h1>
        <div class="info-list">
            <p>üìã <strong>S·ªë l∆∞·ª£ng:</strong> 30 c√¢u h·ªèi tr·∫Øc nghi·ªám.</p>
            <p>‚è∞ <strong>Th·ªùi gian:</strong> 20 ph√∫t.</p>
            <p>üìö <strong>N·ªôi dung:</strong> L√Ω thuy·∫øt v√† b√†i t·∫≠p v·ªÅ ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng trong kh√¥ng gian Oxyz.</p>
            <p>üí° <strong>L∆∞u √Ω:</strong> H·∫øt gi·ªù h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông n·ªôp b√†i.</p>
        </div>
        <button class="start-btn" onclick="beginQuiz()">B·∫ÆT ƒê·∫¶U L√ÄM B√ÄI</button>
    </div>

    <div class="sticky-header" id="sticky-header">
        <div>Th·ªùi gian: <span id="timer" class="timer-box">20:00</span></div>
        <button class="submit-btn" onclick="submitQuiz()">N·ªòP B√ÄI</button>
    </div>

    <div class="quiz-container" id="quiz-container">
        <h1>ƒê·ªÅ Thi Th·ª≠</h1>
        <div id="quiz-content"></div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="result-modal" id="resultModal">
        <h2>K·∫øt Qu·∫£ B√†i Thi</h2>
        <span class="score-display" id="final-score">0/30</span>
        <p id="score-message"></p>
        <button class="submit-btn" style="background:#34495e; margin-top:20px; width: 100%;" onclick="location.reload()">Thi l·∫°i</button>
    </div>

    <script>
        const quizData = [
            // --- PH·∫¶N L√ù THUY·∫æT & C∆† B·∫¢N (1-10) ---
            {
                q: "Vect∆° ph√°p tuy·∫øn \\(\\vec{n}\\) c·ªßa m·∫∑t ph·∫≥ng (P) th·ªèa m√£n ƒëi·ªÅu ki·ªán n√†o?",
                a: ["\\(\\vec{n} = \\vec{0}\\) v√† vu√¥ng g√≥c v·ªõi (P)", "\\(\\vec{n} \\neq \\vec{0}\\) v√† vu√¥ng g√≥c v·ªõi (P)", "\\(\\vec{n} \\neq \\vec{0}\\) v√† song song v·ªõi (P)", "\\(\\vec{n} = \\vec{0}\\) v√† song song v·ªõi (P)"],
                correct: 1,
                explain: "ƒê·ªãnh nghƒ©a: Vect∆° ph√°p tuy·∫øn ph·∫£i kh√°c vect∆°-kh√¥ng v√† c√≥ gi√° vu√¥ng g√≥c v·ªõi m·∫∑t ph·∫≥ng."
            },
            {
                q: "N·∫øu m·∫∑t ph·∫≥ng (\\(\\alpha\\)) c√≥ c·∫∑p vect∆° ch·ªâ ph∆∞∆°ng \\(\\vec{a}, \\vec{b}\\) th√¨ vect∆° ph√°p tuy·∫øn \\(\\vec{n}\\) ƒë∆∞·ª£c t√≠nh b·∫±ng c√¥ng th·ª©c:",
                a: ["\\(\\vec{n} = \\vec{a} . \\vec{b}\\)", "\\(\\vec{n} = \\vec{a} + \\vec{b}\\)", "\\(\\vec{n} = [\\vec{a}, \\vec{b}]\\)", "\\(\\vec{n} = |[\\vec{a}, \\vec{b}]|\\)"],
                correct: 2,
                explain: "Vect∆° ph√°p tuy·∫øn b·∫±ng t√≠ch c√≥ h∆∞·ªõng c·ªßa c·∫∑p vect∆° ch·ªâ ph∆∞∆°ng: \\(\\vec{n} = [\\vec{a}, \\vec{b}]\\)."
            },
            {
                q: "Ph∆∞∆°ng tr√¨nh t·ªïng qu√°t c·ªßa m·∫∑t ph·∫≥ng ƒëi qua \\(M(x_0; y_0; z_0)\\) v√† c√≥ VTPT \\(\\vec{n}=(A;B;C)\\) l√†:",
                a: ["\\(A(x-x_0) + B(y-y_0) + C(z-z_0) = 0\\)", "\\(A(x+x_0) + B(y+y_0) + C(z+z_0) = 0\\)", "\\(\\frac{x-x_0}{A} = \\frac{y-y_0}{B} = \\frac{z-z_0}{C}\\)", "\\(Ax + By + Cz + D = 0\\) v·ªõi \\(D = Ax_0 + By_0 + Cz_0\\)"],
                correct: 0,
                explain: "C√¥ng th·ª©c chu·∫©n: \\(A(x-x_0) + B(y-y_0) + C(z-z_0) = 0\\)."
            },
            {
                q: "M·∫∑t ph·∫≥ng (P): \\(3x - 2y + z - 1 = 0\\) c√≥ m·ªôt vect∆° ph√°p tuy·∫øn l√†:",
                a: ["\\((3; 2; 1)\\)", "\\((3; -2; -1)\\)", "\\((3; -2; 1)\\)", "\\((-3; 2; 1)\\)"],
                correct: 2,
                explain: "H·ªá s·ªë c·ªßa x, y, z l·∫ßn l∆∞·ª£t l√† 3, -2, 1. V·∫≠y \\(\\vec{n}=(3; -2; 1)\\)."
            },
            {
                q: "ƒêi·ªÉm n√†o sau ƒë√¢y thu·ªôc m·∫∑t ph·∫≥ng (P): \\(x - 2y + z - 5 = 0\\)?",
                a: ["M(1; 1; 6)", "N(5; 0; 0)", "P(0; 0; -5)", "Q(2; -1; 5)"],
                correct: 0,
                explain: "Thay M(1;1;6): \\(1 - 2(1) + 6 - 5 = 0\\) (ƒê√∫ng). C√°c ƒëi·ªÉm kh√°c thay v√†o kh√¥ng th·ªèa m√£n."
            },
            {
                q: "Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng ƒëi qua 3 ƒëi·ªÉm A(a;0;0), B(0;b;0), C(0;0;c) v·ªõi abc ‚â† 0 l√†:",
                a: ["\\(\\frac{x}{a} + \\frac{y}{b} + \\frac{z}{c} = 0\\)", "\\(\\frac{x}{a} + \\frac{y}{b} + \\frac{z}{c} = 1\\)", "\\(ax + by + cz = 1\\)", "\\(x + y + z = 1\\)"],
                correct: 1,
                explain: "ƒê√¢y l√† ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng theo ƒëo·∫°n ch·∫Øn."
            },
            {
                q: "Kho·∫£ng c√°ch t·ª´ ƒëi·ªÉm \\(M(x_0; y_0; z_0)\\) ƒë·∫øn m·∫∑t ph·∫≥ng (\\(\\alpha\\)): \\(Ax + By + Cz + D = 0\\) l√†:",
                a: ["\\(\\frac{|Ax_0 + By_0 + Cz_0 + D|}{\\sqrt{A+B+C}}\\)", "\\(\\frac{Ax_0 + By_0 + Cz_0 + D}{\\sqrt{A^2+B^2+C^2}}\\)", "\\(\\frac{|Ax_0 + By_0 + Cz_0 + D|}{\\sqrt{A^2+B^2+C^2}}\\)", "\\(\\sqrt{A^2+B^2+C^2}\\)"],
                correct: 2,
                explain: "C√¥ng th·ª©c t√≠nh kho·∫£ng c√°ch t·ª´ ƒëi·ªÉm ƒë·∫øn m·∫∑t ph·∫≥ng."
            },
            {
                q: "M·∫∑t ph·∫≥ng (P) song song v·ªõi m·∫∑t ph·∫≥ng (Q): \\(2x - y + 3z - 1 = 0\\) s·∫Ω c√≥ VTPT l√†:",
                a: ["\\((2; 1; 3)\\)", "\\((2; -1; -3)\\)", "\\((-2; 1; -3)\\)", "\\((4; -2; 6)\\)"],
                correct: 3,
                explain: "Hai MP song song c√≥ c√πng VTPT ho·∫∑c VTPT t·ªâ l·ªá. \\((4; -2; 6) = 2(2; -1; 3)\\)."
            },
            {
                q: "M·∫∑t ph·∫≥ng ch·ª©a tr·ª•c Ox c√≥ ph∆∞∆°ng tr√¨nh d·∫°ng:",
                a: ["Ax + By + D = 0", "By + Cz = 0", "Ax + Cz = 0", "z = 0"],
                correct: 1,
                explain: "M·∫∑t ph·∫≥ng ch·ª©a tr·ª•c Ox th√¨ ph∆∞∆°ng tr√¨nh kh√¥ng c√≥ x v√† h·∫±ng s·ªë t·ª± do D=0. D·∫°ng: By + Cz = 0."
            },
            {
                q: "ƒêi·ªÅu ki·ªán ƒë·ªÉ hai m·∫∑t ph·∫≥ng vu√¥ng g√≥c l√†:",
                a: ["T√≠ch c√≥ h∆∞·ªõng c·ªßa 2 VTPT b·∫±ng \\(\\vec{0}\\)", "T√≠ch v√¥ h∆∞·ªõng c·ªßa 2 VTPT b·∫±ng 0", "Hai VTPT t·ªâ l·ªá v·ªõi nhau", "Hai VTPT b·∫±ng nhau"],
                correct: 1,
                explain: "Hai m·∫∑t ph·∫≥ng vu√¥ng g√≥c khi v√† ch·ªâ khi hai vect∆° ph√°p tuy·∫øn c·ªßa ch√∫ng vu√¥ng g√≥c (T√≠ch v√¥ h∆∞·ªõng b·∫±ng 0)."
            },

            // --- PH·∫¶N B√ÄI T·∫¨P (11-25) ---
            {
                q: "Vi·∫øt ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng ƒëi qua M(2; 1; -3) v√† c√≥ VTPT \\(\\vec{n}=(3; -2; 6)\\).",
                a: ["\\(3x - 2y + 6z - 14 = 0\\)", "\\(3x - 2y + 6z + 14 = 0\\)", "\\(3x + 2y + 6z + 14 = 0\\)", "\\(3x - 2y + 6z - 18 = 0\\)"],
                correct: 1,
                explain: "\\(3(x-2) - 2(y-1) + 6(z+3) = 0 \\Leftrightarrow 3x - 6 - 2y + 2 + 6z + 18 = 0 \\Leftrightarrow 3x - 2y + 6z + 14 = 0\\)."
            },
            {
                q: "Vi·∫øt ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng ƒëi qua A(1; 0; -2), B(-1; -1; 3) v√† vu√¥ng g√≥c v·ªõi (P): \\(2x - y + 2z + 11 = 0\\).",
                a: ["\\(3x + 14y + 4z + 5 = 0\\)", "\\(3x + 14y + 4z - 5 = 0\\)", "\\(2x - y + 2z + 2 = 0\\)", "\\(3x - 14y + 4z + 5 = 0\\)"],
                correct: 0,
                explain: "VTPT c·ªßa (Q) l√† t√≠ch c√≥ h∆∞·ªõng c·ªßa \\(\\vec{AB}=(-2;-1;5)\\) v√† \\(\\vec{n_P}=(2;-1;2)\\). \\(\\vec{n_Q} = [\\vec{AB}, \\vec{n_P}] = (3; 14; 4)\\). PT: \\(3(x-1) + 14y + 4(z+2) = 0 \\Leftrightarrow 3x + 14y + 4z + 5 = 0\\)."
            },
            {
                q: "Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng trung tr·ª±c c·ªßa ƒëo·∫°n AB v·ªõi A(2; 1; 1) v√† B(2; -1; 3).",
                a: ["\\(y - z + 2 = 0\\)", "\\(y + z - 2 = 0\\)", "\\(x + y - z = 0\\)", "\\(-y + z - 2 = 0\\)"],
                correct: 3,
                explain: "Trung ƒëi·ªÉm I(2; 0; 2). VTPT \\(\\vec{AB} = (0; -2; 2)\\) ch·ªçn \\((0; -1; 1)\\). PT: \\(0(x-2) - 1(y-0) + 1(z-2) = 0 \\Leftrightarrow -y + z - 2 = 0\\)."
            },
            {
                q: "Vi·∫øt ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng ƒëi qua M(1; 2; -1) v√† vu√¥ng g√≥c v·ªõi tr·ª•c Ox.",
                a: ["x - 1 = 0", "y - 2 = 0", "z + 1 = 0", "x + y + z = 0"],
                correct: 0,
                explain: "Vu√¥ng g√≥c v·ªõi Ox n√™n VTPT l√† \\(\\vec{i}=(1;0;0)\\). PT: \\(1(x-1) + 0 + 0 = 0 \\Leftrightarrow x - 1 = 0\\)."
            },
            {
                q: "Vi·∫øt ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng (P) ƒëi qua A(2; -1; 3) v√† song song v·ªõi (Q): \\(x + 2y - z + 5 = 0\\).",
                a: ["\\(x + 2y - z + 3 = 0\\)", "\\(x + 2y - z - 3 = 0\\)", "\\(x + 2y - z + 5 = 0\\)", "\\(2x + 4y - 2z - 6 = 0\\)"],
                correct: 0,
                explain: "Song song (Q) n√™n d·∫°ng \\(x + 2y - z + D = 0\\) (D‚â†5). Thay A v√†o: \\(2 + 2(-1) - 3 + D = 0 \\Leftrightarrow -3 + D = 0 \\Leftrightarrow D = 3\\)."
            },
            {
                q: "Cho 3 ƒëi·ªÉm A(2;0;0), B(0;3;0), C(0;0;6). Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng (ABC) l√†:",
                a: ["\\(\\frac{x}{2} + \\frac{y}{3} + \\frac{z}{6} = 0\\)", "\\(3x + 2y + z - 6 = 0\\)", "\\(3x + 2y + z - 1 = 0\\)", "\\(\\frac{x}{3} + \\frac{y}{2} + \\frac{z}{6} = 1\\)"],
                correct: 1,
                explain: "PT ƒëo·∫°n ch·∫Øn: \\(\\frac{x}{2} + \\frac{y}{3} + \\frac{z}{6} = 1\\). Quy ƒë·ªìng m·∫´u 6: \\(3x + 2y + z = 6 \\Leftrightarrow 3x + 2y + z - 6 = 0\\)."
            },
            {
                q: "Vi·∫øt ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng ƒëi qua A(1; 2; 3) v√† ch·ª©a tr·ª•c Oz.",
                a: ["2x - y = 0", "x - 2y = 0", "2x + y = 0", "3x - z = 0"],
                correct: 0,
                explain: "Ch·ª©a Oz n√™n ƒëi qua O(0;0;0) v√† nh·∫≠n \\(\\vec{k}=(0;0;1)\\) l√†m VTCP. VTCP th·ª© 2 l√† \\(\\vec{OA}=(1;2;3)\\). \\(\\vec{n} = [\\vec{OA}, \\vec{k}] = (2; -1; 0)\\). PT: \\(2x - y = 0\\)."
            },
            {
                q: "Cho A(1; 1; 1), B(0; 4; 0), C(2; 2; 0). Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng (ABC) l√†:",
                a: ["x + y + 2z - 4 = 0", "x - y + 2z + 4 = 0", "x + y - 2z - 4 = 0", "2x + 2y + z - 4 = 0"],
                correct: 0,
                explain: "\\(\\vec{AB}=(-1;3;-1)\\), \\(\\vec{AC}=(1;1;-1)\\). \\(\\vec{n}=[\\vec{AB}, \\vec{AC}] = (-2; -2; -4)\\), ch·ªçn \\((1; 1; 2)\\). ƒêi qua B(0;4;0): \\(1(x) + 1(y-4) + 2(z) = 0 \\Leftrightarrow x + y + 2z - 4 = 0\\)."
            },
            {
                q: "M·∫∑t ph·∫≥ng (P) ƒëi qua M(1; -1; 1), N(2; 1; 2) v√† song song v·ªõi tr·ª•c Oz c√≥ ph∆∞∆°ng tr√¨nh:",
                a: ["2x - y - 3 = 0", "x - 2y - 3 = 0", "2x + y - 3 = 0", "x + 2y + z = 0"],
                correct: 0,
                explain: "\\(\\vec{MN}=(1;2;1)\\). Song song Oz n√™n VTCP \\(\\vec{k}=(0;0;1)\\). \\(\\vec{n}=[\\vec{MN}, \\vec{k}] = (2; -1; 0)\\). PT qua M: \\(2(x-1) - 1(y+1) = 0 \\Leftrightarrow 2x - y - 3 = 0\\)."
            },
            {
                q: "T√¨m m ƒë·ªÉ hai m·∫∑t ph·∫≥ng (P): \\(mx + (m-1)y + z - 10 = 0\\) v√† (Q): \\(2x + y - 2z + 3 = 0\\) vu√¥ng g√≥c.",
                a: ["m = 1", "m = -1", "m = 2", "m = -2"],
                correct: 0,
                explain: "Vu√¥ng g√≥c \\(\\Leftrightarrow \\vec{n_P} . \\vec{n_Q} = 0 \\Leftrightarrow 2m + 1(m-1) - 2 = 0 \\Leftrightarrow 3m - 3 = 0 \\Leftrightarrow m = 1\\)."
            },
            
            // --- PH·∫¶N V·∫¨N D·ª§NG & N√ÇNG CAO (26-30) ---
            {
                q: "Cho A(0; 1; 0), B(2; 3; 1) v√† (Q): \\(x + 2y - z = 0\\). Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng (P) qua A, B v√† vu√¥ng g√≥c v·ªõi (Q) l√†:",
                a: ["4x - 3y - 2z + 3 = 0", "4x + 3y - 2z + 3 = 0", "x + y + z - 1 = 0", "2x - 3y - z + 3 = 0"],
                correct: 0,
                explain: "\\(\\vec{AB}=(2;2;1)\\), \\(\\vec{n_Q}=(1;2;-1)\\). \\(\\vec{n_P}=[\\vec{AB}, \\vec{n_Q}]=(-4;3;2)\\). Ch·ªçn VTPT \\((4;-3;-2)\\). Qua A(0;1;0): \\(4x - 3(y-1) - 2z = 0 \\Leftrightarrow 4x - 3y - 2z + 3 = 0\\)."
            },
            {
                q: "M·∫∑t ph·∫≥ng (P): \\(2x - y + 2z - 1 = 0\\). M·∫∑t ph·∫≥ng (Q) song song v·ªõi (P) v√† c√°ch (P) m·ªôt kho·∫£ng b·∫±ng 3 c√≥ ph∆∞∆°ng tr√¨nh:",
                a: ["\\(2x - y + 2z - 10 = 0\\) ho·∫∑c \\(2x - y + 2z + 8 = 0\\)", "\\(2x - y + 2z + 10 = 0\\)", "\\(2x - y + 2z - 8 = 0\\)", "\\(2x - y + 2z + 5 = 0\\)"],
                correct: 0,
                explain: "(Q) d·∫°ng \\(2x-y+2z+D=0\\). L·∫•y \\(M(0;-1;0) \\in (P)\\). \\(d(M, Q) = \\frac{|0 - (-1) + 0 + D|}{\\sqrt{4+1+4}} = 3 \\Leftrightarrow |1+D|=9\\). Suy ra D=8 ho·∫∑c D=-10."
            },
            {
                q: "Vi·∫øt ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng (P) ch·ª©a giao tuy·∫øn c·ªßa 2 m·∫∑t ph·∫≥ng (\\(\\alpha\\)): 3x - y + z - 2 = 0 v√† (\\(\\beta\\)): x + 4y - 5 = 0, ƒë·ªìng th·ªùi song song v·ªõi (\\(\\gamma\\)): 2x + 21y - z + 7 = 0.",
                a: ["2x + 21y - z - 23 = 0", "2x + 21y - z + 23 = 0", "x - y + z + 1 = 0", "Kh√¥ng t·ªìn t·∫°i"],
                correct: 0,
                explain: "D·∫°ng ch√πm MP: \\(m(3x-y+z-2) + (x+4y-5) = 0\\). T√¨m m ƒë·ªÉ VTPT t·ªâ l·ªá v·ªõi (2;21;-1). Gi·∫£i ra \\(m=2/3\\) ho·∫∑c t√¨m 2 ƒëi·ªÉm chung r·ªìi vi·∫øt PT. K·∫øt qu·∫£: \\(2x + 21y - z - 23 = 0\\)."
            },
            {
                q: "Cho ƒëi·ªÉm M(1; 2; 3). G·ªçi A, B, C l·∫ßn l∆∞·ª£t l√† h√¨nh chi·∫øu c·ªßa M tr√™n Ox, Oy, Oz. Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng (ABC) l√†:",
                a: ["\\(\\frac{x}{1} + \\frac{y}{2} + \\frac{z}{3} = 1\\)", "\\(x + y + z = 1\\)", "\\(6x + 3y + 2z - 6 = 0\\)", "\\(2x + y + 3z = 6\\)"],
                correct: 0,
                explain: "H√¨nh chi·∫øu: A(1;0;0), B(0;2;0), C(0;0;3). Ph∆∞∆°ng tr√¨nh ƒëo·∫°n ch·∫Øn: \\(\\frac{x}{1} + \\frac{y}{2} + \\frac{z}{3} = 1\\)."
            },
            {
                q: "T√¨m m ƒë·ªÉ kho·∫£ng c√°ch t·ª´ M(1; 2; 3) ƒë·∫øn m·∫∑t ph·∫≥ng (P): \\(2x - 2y + z + m = 0\\) b·∫±ng 2.",
                a: ["m = -7 ho·∫∑c m = 5", "m = 7 ho·∫∑c m = -5", "m = 1", "m = 4"],
                correct: 0,
                explain: "\\(d = \\frac{|2(1) - 2(2) + 3 + m|}{\\sqrt{4+4+1}} = 2 \\Leftrightarrow \\frac{|m+1|}{3} = 2 \\Leftrightarrow |m+1| = 6 \\Leftrightarrow m = 5 \\cup m = -7\\)."
            }
        ];

        // --- Logic X·ª≠ L√Ω ---
        let timeRemaining = 20 * 60; // 20 ph√∫t
        let timerInterval;

        function beginQuiz() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('sticky-header').style.display = 'flex';
            document.getElementById('quiz-container').style.display = 'block';
            
            renderQuestions();
            startTimer();
        }

        function startTimer() {
            const timerElement = document.getElementById("timer");
            timerInterval = setInterval(() => {
                timeRemaining--;
                let minutes = Math.floor(timeRemaining / 60);
                let seconds = timeRemaining % 60;
                timerElement.textContent = `${minutes < 10 ? '0' + minutes : minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                    alert("ƒê√£ h·∫øt th·ªùi gian l√†m b√†i!");
                }
            }, 1000);
        }

        function renderQuestions() {
            const container = document.getElementById("quiz-content");
            container.innerHTML = "";
            quizData.forEach((item, index) => {
                const html = `
                    <div class="question-card" id="q${index}">
                        <div class="question-title">C√¢u ${index + 1}: ${item.q}</div>
                        <div class="options">
                            ${item.a.map((opt, i) => `
                                <label class="option-label">
                                    <input type="radio" name="q${index}" value="${i}">
                                    <span>${opt}</span>
                                </label>
                            `).join('')}
                        </div>
                        <div class="explanation" id="explain${index}">
                            <strong>L·ªùi gi·∫£i:</strong> ${item.explain}
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
            });
            MathJax.typesetPromise();
        }

        function submitQuiz() {
            clearInterval(timerInterval);
            let score = 0;
            const total = quizData.length;

            quizData.forEach((item, index) => {
                const inputs = document.getElementsByName(`q${index}`);
                const explainDiv = document.getElementById(`explain${index}`);
                const labels = document.querySelectorAll(`#q${index} .option-label`);
                
                let selected = -1;
                inputs.forEach(input => {
                    input.disabled = true;
                    if (input.checked) selected = parseInt(input.value);
                });

                if (selected === item.correct) {
                    score++;
                    // Kh√¥ng hi·ªán m√†u ƒë√∫ng ·ªü ƒë√¢y v√¨ overlay che m·∫•t r·ªìi, v√† ng∆∞·ªùi d√πng kh√¥ng xem ƒë∆∞·ª£c
                } else {
                    // Kh√¥ng hi·ªán m√†u sai
                }

                // KH√îNG hi·ªÉn th·ªã gi·∫£i th√≠ch
                // explainDiv.style.display = "block"; 
            });

            document.getElementById("final-score").textContent = `${score}/${total}`;
            document.getElementById("score-message").textContent = score >= 24 ? "Xu·∫•t s·∫Øc! B·∫°n n·∫Øm r·∫•t ch·∫Øc ki·∫øn th·ª©c." : score >= 15 ? "Kh√° t·ªët, h√£y √¥n t·∫≠p th√™m c√°c c√¢u sai." : "C·∫ßn c·ªë g·∫Øng nhi·ªÅu h∆°n nh√©!";
            document.getElementById("overlay").style.display = "block";
            document.getElementById("resultModal").style.display = "block";
            
            MathJax.typesetPromise();
        }

        function closeModal() {
            // H√†m n√†y kh√¥ng c√≤n n√∫t g·ªçi, nh∆∞ng gi·ªØ l·∫°i ƒë·ªÉ tr√°nh l·ªói n·∫øu c√≥ reference
            document.getElementById("overlay").style.display = "none";
            document.getElementById("resultModal").style.display = "none";
        }
    </script>
</body>
</html>