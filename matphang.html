<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph∆∞∆°ng Tr√¨nh M·∫∑t Ph·∫≥ng </title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; }
        
         .home-link {
            position: absolute; top: 20px; left: 20px;
            text-decoration: none; color: #7f8c8d; font-weight: bold; font-size: 1em;
            display: flex; align-items: center; gap: 5px;
        }

        /* M√†n h√¨nh B·∫Øt ƒë·∫ßu */
        #start-screen {
            background: white; padding: 40px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center; margin-top: 50px;
            position: relative;
        }
         
        .home-link:hover { color: #3498db; }
        
        .name-input {
            width: 80%; max-width: 400px; padding: 15px; margin: 25px 0;
            border: 2px solid #3498db; border-radius: 8px; font-size: 1.2em;
            outline: none; display: block; margin-left: auto; margin-right: auto;
        }
        .name-input:focus { box-shadow: 0 0 10px rgba(52, 152, 219, 0.3); }
        
        .start-btn {
            background-color: #27ae60; color: white; border: none; padding: 15px 50px; 
            border-radius: 30px; font-size: 1.3em; font-weight: bold; cursor: pointer; 
            transition: transform 0.2s, background 0.2s;
        }
        .start-btn:hover { background-color: #2ecc71; transform: scale(1.05); }

        /* Thanh ƒëi·ªÅu khi·ªÉn */
        .sticky-header {
            display: none; position: fixed; top: 0; left: 0; width: 100%; background: #2c3e50; color: white;
            padding: 15px 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            justify-content: center; align-items: center; gap: 20px;
        }
        .timer-box { font-size: 1.5em; font-weight: bold; color: #f1c40f; }
        .submit-btn { background-color: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: bold; }
        
        /* ƒêi·ªÅu khi·ªÉn nh·∫°c */
        .music-control { cursor: pointer; font-size: 1.5em; background: none; border: none; color: white; }

        .quiz-container { display: none; background: white; padding: 30px; border-radius: 8px; margin-top: 80px; }
        .question-card { margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .question-title { font-weight: 600; font-size: 1.1em; margin-bottom: 15px; color: #2980b9; }
        .options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .option-label { display: block; padding: 10px 15px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; }
        .option-label:hover { background-color: #f8f9fa; }
        
        /* Modal K·∫øt qu·∫£ */
        .result-modal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 30px rgba(0,0,0,0.3);
            text-align: center; z-index: 2000; width: 90%; max-width: 450px;
        }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1500; }
        
        .student-name-final { color: #e67e22; font-weight: bold; font-size: 1.4em; margin-bottom: 10px; display: block; }
        .score-display { font-size: 3em; color: #2c3e50; font-weight: bold; margin: 10px 0; display: block; }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="asset/Close to You - YouTube.mp3" type="audio/mpeg">
    </audio>

    <div id="start-screen">

        <h1 style="color: #2c3e50;">PH∆Ø∆†NG TR√åNH M·∫∂T PH·∫≤NG</h1>
        <div style="text-align: left; max-width: 500px; margin: 0 auto; line-height: 1.6;">
            <a href="index.html" class="home-link">‚¨Ö Quay v·ªÅ Trang Ch·ªß</a>
            <p>üìù <strong>S·ªë c√¢u:</strong> 30 c√¢u h·ªèi tr·∫Øc nghi·ªám</p>
            <p>‚è±Ô∏è <strong>Th·ªùi gian:</strong> 20 ph√∫t</p>
            <p>üéµ <strong>;> </strong> C·ªë g·∫Øng l√†m h·∫øt kh·∫£ nƒÉng c·ªßa m√¨nh</p>
        </div>

        <input type="text" id="username" class="name-input" placeholder="Nh·∫≠p H·ªç v√† T√™n c·ªßa b·∫°n..." autocomplete="off">
        <button class="start-btn" onclick="beginQuiz()">B·∫ÆT ƒê·∫¶U</button>
    </div>

    <div class="sticky-header" id="sticky-header">
        <div id="display-name-header" style="font-weight: bold; color: #bdc3c7;"></div>
        
        <button class="music-control" onclick="toggleMusic()" title="B·∫≠t/T·∫Øt nh·∫°c">üîä</button>
        
        <div> | <span id="timer" class="timer-box">20:00</span></div>
        <button class="submit-btn" style="margin-left: 20px;" onclick="submitQuiz()">N·ªòP B√ÄI</button>
    </div>

    <div class="quiz-container" id="quiz-container">
        <h2 style="text-align: center; color: #2c3e50;">ƒê·ªÄ B√ÄI</h2>
        <div id="quiz-content"></div>
    </div>

    <div class="overlay" id="overlay"></div>
    
    <div class="result-modal" id="resultModal">
        <h2>K·∫æT QU·∫¢ B√ÄI THI</h2>
        <div>Th√≠ sinh: <span class="student-name-final" id="final-name"></span></div>
        <span class="score-display" id="final-score">0/30</span>
        <p id="score-message"></p>
        <button class="submit-btn" style="background:#34495e; margin-top:15px; width: 100%;" onclick="location.reload()">L√†m l·∫°i b√†i kh√°c</button>
    </div>

    <script>
        const quizData = [
            { q: "Vect∆° ph√°p tuy·∫øn \\(\\vec{n}\\) c·ªßa m·∫∑t ph·∫≥ng (P) th·ªèa m√£n ƒëi·ªÅu ki·ªán n√†o?", a: ["\\(\\vec{n} = \\vec{0}\\) v√† vu√¥ng g√≥c", "\\(\\vec{n} \\neq \\vec{0}\\) v√† vu√¥ng g√≥c", "\\(\\vec{n} \\neq \\vec{0}\\) v√† song song", "\\(\\vec{n} = \\vec{0}\\) v√† song song"], correct: 1 },
            { q: "Ph∆∞∆°ng tr√¨nh t·ªïng qu√°t c·ªßa m·∫∑t ph·∫≥ng ƒëi qua \\(M(x_0; y_0; z_0)\\) c√≥ VTPT \\(\\vec{n}=(A;B;C)\\):", a: ["\\(A(x-x_0)+B(y-y_0)+C(z-z_0)=0\\)", "\\(Ax+By+Cz+D=0\\)", "\\(\\frac{x}{A}+\\frac{y}{B}+\\frac{z}{C}=1\\)", "\\(x+y+z=1\\)"], correct: 0 },
            { q: "M·∫∑t ph·∫≥ng (P): 3x - 2y + z - 1 = 0 c√≥ VTPT l√†:", a: ["(3; 2; 1)", "(3; -2; 1)", "(3; -2; -1)", "(-3; 2; 1)"], correct: 1 },
            { q: "ƒêi·ªÉm n√†o thu·ªôc m·∫∑t ph·∫≥ng x + y - z - 2 = 0?", a: ["M(1;1;0)", "N(1;1;1)", "P(2;1;1)", "Q(0;0;2)"], correct: 2 },
            { q: "Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng ƒëo·∫°n ch·∫Øn qua A(2;0;0), B(0;-3;0), C(0;0;1)?", a: ["x/2 + y/-3 + z/1 = 0", "x/2 + y/-3 + z/1 = 1", "2x - 3y + z = 1", "x/2 + y/3 + z/1 = 1"], correct: 1 },
            { q: "Kho·∫£ng c√°ch t·ª´ O(0;0;0) ƒë·∫øn m·∫∑t ph·∫≥ng 2x - 2y + z - 6 = 0 l√†:", a: ["1", "2", "3", "6"], correct: 1 },
            { q: "M·∫∑t ph·∫≥ng (Oxy) c√≥ ph∆∞∆°ng tr√¨nh l√†:", a: ["z = 0", "x = 0", "y = 0", "x + y = 0"], correct: 0 },
            { q: "ƒêi·ªÅu ki·ªán ƒë·ªÉ hai m·∫∑t ph·∫≥ng vu√¥ng g√≥c?", a: ["T√≠ch c√≥ h∆∞·ªõng VTPT = 0", "T√≠ch v√¥ h∆∞·ªõng VTPT = 0", "Hai VTPT b·∫±ng nhau", "Hai VTPT t·ªâ l·ªá"], correct: 1 },
            { q: "M·∫∑t ph·∫≥ng ƒëi qua M(1;2;3) v√† nh·∫≠n \\(\\vec{k}=(0;0;1)\\) l√†m VTPT c√≥ pt:", a: ["z - 3 = 0", "z + 3 = 0", "x + y + z - 6 = 0", "z = 0"], correct: 0 },
            { q: "Cho A(1;0;1), B(0;1;2). VTPT c·ªßa m·∫∑t ph·∫≥ng trung tr·ª±c ƒëo·∫°n AB l√†:", a: ["(1; -1; -1)", "(-1; 1; 1)", "(1; -1; 1)", "(1; 1; 1)"], correct: 1 },
            { q: "N·∫øu m·∫∑t ph·∫≥ng (P) c√≥ c·∫∑p VTCP \\(\\vec{u}, \\vec{v}\\) th√¨ VTPT \\(\\vec{n}\\) b·∫±ng:", a: ["\\(\\vec{u}.\\vec{v}\\)", "\\([\\vec{u}, \\vec{v}]\\)", "\\(\\vec{u} + \\vec{v}\\)", "\\(|[\\vec{u}, \\vec{v}]|\\)"], correct: 1 },
            { q: "M·∫∑t ph·∫≥ng (P) qua 3 ƒëi·ªÉm A, B, C kh√¥ng th·∫≥ng h√†ng c√≥ VTPT l√†:", a: ["\\(\\vec{AB}\\)", "\\(\\vec{AC}\\)", "\\([\\vec{AB}, \\vec{AC}]\\)", "\\(\\vec{AB} . \\vec{AC}\\)"], correct: 2 },
            { q: "Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng ƒëi qua A(1;1;1) v√† song song v·ªõi 2x - y + z + 5 = 0:", a: ["2x - y + z - 2 = 0", "2x - y + z + 2 = 0", "2x - y + z = 0", "x - y + z = 0"], correct: 0 },
            { q: "Vi·∫øt ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng ch·ª©a tr·ª•c Oz v√† ƒëi qua A(1;2;3):", a: ["2x - y = 0", "x - 2y = 0", "x + y = 0", "2x + y = 0"], correct: 0 },
            { q: "M·∫∑t ph·∫≥ng (P) song song v·ªõi (Q): x + y + z - 3 = 0 v√† ƒëi qua g·ªëc t·ªça ƒë·ªô O:", a: ["x + y + z = 0", "x + y + z + 3 = 0", "x - y - z = 0", "3x + 3y + 3z = 1"], correct: 0 },
            { q: "VTPT c·ªßa m·∫∑t ph·∫≥ng ƒëi qua 3 ƒëi·ªÉm A(1;0;0), B(0;2;0), C(0;0;3) l√†:", a: ["(6; 3; 2)", "(1; 2; 3)", "(3; 2; 1)", "(2; 3; 6)"], correct: 0 },
            { q: "Cho m·∫∑t ph·∫≥ng 2x + my + 3z - 5 = 0 v√† x - 2y + 2z + 1 = 0. T√¨m m ƒë·ªÉ ch√∫ng vu√¥ng g√≥c:", a: ["m = 4", "m = -4", "m = 2", "m = 1"], correct: 0 },
            { q: "G√≥c gi·ªØa hai m·∫∑t ph·∫≥ng (P) v√† (Q) ƒë∆∞·ª£c t√≠nh th√¥ng qua:", a: ["G√≥c gi·ªØa hai VTPT", "Tr·ªã tuy·ªát ƒë·ªëi cos g√≥c gi·ªØa hai VTPT", "Sin g√≥c gi·ªØa hai VTPT", "T√≠ch v√¥ h∆∞·ªõng"], correct: 1 },
            { q: "M·∫∑t ph·∫≥ng trung tr·ª±c c·ªßa ƒëo·∫°n th·∫≥ng AB ƒëi qua:", a: ["ƒêi·ªÉm A", "ƒêi·ªÉm B", "Trung ƒëi·ªÉm I c·ªßa AB", "G·ªëc O"], correct: 2 },
            { q: "Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng (Oxz) l√†:", a: ["x = 0", "y = 0", "z = 0", "x + z = 0"], correct: 1 },
            { q: "Kho·∫£ng c√°ch t·ª´ A(1;1;1) ƒë·∫øn m·∫∑t ph·∫≥ng x + y + z - 6 = 0 l√†:", a: ["\\(\\sqrt{3}\\)", "3", "1", "0"], correct: 0 },
            { q: "V·ªã tr√≠ t∆∞∆°ng ƒë·ªëi c·ªßa (P): x+y+z-1=0 v√† (Q): 2x+2y+2z-2=0?", a: ["C·∫Øt nhau", "Song song", "Tr√πng nhau", "Vu√¥ng g√≥c"], correct: 2 },
            { q: "M·∫∑t ph·∫≥ng (P) ƒëi qua M(1; -1; 1), N(2; 1; 2) v√† song song Oz:", a: ["2x - y - 3 = 0", "x - 2y - 3 = 0", "2x + y - 3 = 0", "x + 2y + z = 0"], correct: 0 },
            { q: "Cho A(0;1;0), B(2;3;1), (Q): x+2y-z=0. Mp (P) qua A, B v√† vu√¥ng g√≥c (Q):", a: ["4x - 3y - 2z + 3 = 0", "4x + 3y - 2z + 3 = 0", "x + y + z - 1 = 0", "2x - 3y - z + 3 = 0"], correct: 0 },
            { q: "M·∫∑t ph·∫≥ng (P) c√°ch g·ªëc O m·ªôt kho·∫£ng b·∫±ng 1 v√† song song v·ªõi x+y+z=0:", a: ["x+y+z-\\(\\sqrt{3}\\)=0", "x+y+z-3=0", "x+y+z-1=0", "x+y+z+1=0"], correct: 0 },
            { q: "H√¨nh chi·∫øu c·ªßa M(1;2;3) l√™n tr·ª•c Oy l√† B. Mp qua B vu√¥ng g√≥c Oy l√†:", a: ["y - 2 = 0", "y + 2 = 0", "x + z = 0", "y = 0"], correct: 0 },
            { q: "Cho A(1;0;-2), B(-1;-1;3). Mp qua A, B v√† vu√¥ng g√≥c v·ªõi 2x - y + 2z + 11 = 0:", a: ["3x + 14y + 4z + 5 = 0", "3x - 14y + 4z + 5 = 0", "2x - y + 2z = 0", "x + y + z = 0"], correct: 0 },
            { q: "Ph∆∞∆°ng tr√¨nh m·∫∑t ph·∫≥ng (P) ch·ª©a tr·ª•c Oy v√† ƒëi·ªÉm M(1;1;1):", a: ["x - z = 0", "x + z = 0", "x - y = 0", "y - z = 0"], correct: 0 },
            { q: "Cho t·ª© di·ªán OABC c√≥ OA, OB, OC ƒë√¥i m·ªôt vu√¥ng g√≥c. OA=a, OB=b, OC=c. Pt mp (ABC):", a: ["x/a + y/b + z/c = 1", "x/a + y/b + z/c = 0", "ax+by+cz=1", "x+y+z=1"], correct: 0 },
            { q: "T√¨m m ƒë·ªÉ hai m·∫∑t ph·∫≥ng song song: 2x - my + 3z - 6 = 0 v√† nx - 2y + 6z + 3 = 0:", a: ["m=1, n=4", "m=1, n=-4", "m=-1, n=4", "m=4, n=1"], correct: 0 },
        ];

        let timeRemaining = 20 * 60;
        let timerInterval;
        let userName = "";
        let audio = document.getElementById("bg-music");
        
        // ƒê·∫∑t √¢m l∆∞·ª£ng v·ª´a ph·∫£i (50%)
        audio.volume = 0.3;

        function beginQuiz() {
            const input = document.getElementById("username");
            if (!input.value.trim()) {
                alert("‚ùó Vui l√≤ng nh·∫≠p h·ªç t√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu.");
                input.focus();
                return;
            }
            
            userName = input.value.trim();
            document.getElementById("start-screen").style.display = "none";
            document.getElementById("sticky-header").style.display = "flex";
            document.getElementById("quiz-container").style.display = "block";
            document.getElementById("display-name-header").textContent = userName;

            // B·∫ÆT ƒê·∫¶U PH√ÅT NH·∫†C
            audio.play().catch(error => {
                console.log("Tr√¨nh duy·ªát ch·∫∑n t·ª± ph√°t nh·∫°c, h√£y b·∫•m n√∫t loa ƒë·ªÉ b·∫≠t.");
            });

            renderQuestions();
            startTimer();
        }

        function startTimer() {
            const timerEl = document.getElementById("timer");
            timerInterval = setInterval(() => {
                timeRemaining--;
                let m = Math.floor(timeRemaining / 60);
                let s = timeRemaining % 60;
                timerEl.textContent = `${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                }
            }, 1000);
        }

        // H√†m b·∫≠t t·∫Øt nh·∫°c
        function toggleMusic() {
            if (audio.paused) {
                audio.play();
            } else {
                audio.pause();
            }
        }

        function renderQuestions() {
            const container = document.getElementById("quiz-content");
            container.innerHTML = "";
            quizData.forEach((item, idx) => {
                const html = `
                    <div class="question-card" id="q${idx}">
                        <div class="question-title">C√¢u ${idx + 1}: ${item.q}</div>
                        <div class="options">
                            ${item.a.map((opt, optIdx) => `
                                <label class="option-label">
                                    <input type="radio" name="q${idx}" value="${optIdx}">
                                    ${opt}
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
            });
            MathJax.typesetPromise();
        }

        function submitQuiz() {
            clearInterval(timerInterval);
            
            // D·ª™NG NH·∫†C KHI N·ªòP B√ÄI
            audio.pause();

            let score = 0;
            quizData.forEach((item, idx) => {
                const inputs = document.getElementsByName(`q${idx}`);
                let selected = -1;
                inputs.forEach(input => {
                    if (input.checked) selected = parseInt(input.value);
                    input.disabled = true;
                });
                if (selected === item.correct) score++;
            });

            document.getElementById("final-name").textContent = userName;
            document.getElementById("final-score").textContent = `${score}/${quizData.length}`;
            
            let msg = "";
            if (score >= 25) msg = "Tuy·ªát v·ªùi! B·∫°n l√† cao th·ªß h√¨nh h·ªçc!";
            else if (score >= 15) msg = "Kh√° t·ªët, c·ªë g·∫Øng th√™m nh√©!";
            else msg = "K·∫øt qu·∫£ ch∆∞a cao, h√£y √¥n l·∫°i b√†i.";
            document.getElementById("score-message").textContent = msg;

            document.getElementById("overlay").style.display = "block";
            document.getElementById("resultModal").style.display = "block";
        }
    </script>
</body>
</html>